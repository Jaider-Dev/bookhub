<div class="recovery-container">
    <h2>Recuperar Contraseña</h2>
    
    <!-- Paso 1: Solicitar recuperación -->
    <div *ngIf="step === 'request'">
        <form (ngSubmit)="solicitarRecuperacion()">
            <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
            <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

            <div class="form-group">
                <label for="email">Email</label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    [(ngModel)]="email" 
                    required
                    [disabled]="isLoading"
                    placeholder="correo@ejemplo.com"
                >
            </div>

            <button type="submit" class="btn-primary" [disabled]="isLoading">
                {{ isLoading ? 'Enviando...' : 'Enviar enlace de recuperación' }}
            </button>
        </form>
    </div>

    <!-- Paso 2: Restablecer contraseña -->
    <div *ngIf="step === 'reset'">
        <form (ngSubmit)="resetPassword()">
            <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
            <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

            <div class="form-group">
                <label for="email2">Email</label>
                <input 
                    type="email" 
                    id="email2" 
                    name="email2" 
                    [(ngModel)]="email" 
                    required
                    [disabled]="isLoading"
                    placeholder="correo@ejemplo.com"
                >
            </div>

            <div class="form-group">
                <label for="token">Token de recuperación</label>
                <input 
                    type="text" 
                    id="token" 
                    name="token" 
                    [(ngModel)]="recoveryToken" 
                    required
                    [disabled]="isLoading"
                    placeholder="Token recibido por email"
                >
                <small>Revisa la consola del servidor para obtener el token</small>
            </div>

            <div class="form-group">
                <label for="newPassword">Nueva Contraseña</label>
                <input 
                    type="password" 
                    id="newPassword" 
                    name="newPassword" 
                    [(ngModel)]="newPassword" 
                    required
                    [disabled]="isLoading"
                    placeholder="Mínimo 6 caracteres"
                >
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirmar Nueva Contraseña</label>
                <input 
                    type="password" 
                    id="confirmPassword" 
                    name="confirmPassword" 
                    [(ngModel)]="confirmPassword" 
                    required
                    [disabled]="isLoading"
                    placeholder="Repite la contraseña"
                >
            </div>

            <button type="submit" class="btn-primary" [disabled]="isLoading">
                {{ isLoading ? 'Restableciendo...' : 'Restablecer Contraseña' }}
            </button>
        </form>
    </div>

    <div class="login-link">
        <p><a routerLink="/login">Volver al login</a></p>
    </div>
</div>


